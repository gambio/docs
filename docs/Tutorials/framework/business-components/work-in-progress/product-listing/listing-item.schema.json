{
    "$id": "https://developers.gambio.de/schema/product-listing-item.schema.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "description": "JSON Schema for the gambio shop product listing items",
    "type": "object",
    "properties": {
        "id": {
            "type": "integer"
        },
        "details": {
            "$ref": "#/definitions/details"
        },
        "settings": {
            "$ref": "#/definitions/settings"
        },
        "shipping": {
            "$ref": "#/definitions/shipping"
        },
        "stock": {
            "$ref": "#/definitions/stock"
        },
        "meta": {
            "$ref": "#/definitions/meta"
        },
        "tax": {
            "$ref": "#/definitions/tax"
        },
        "price": {
            "type": "object",
            "properties": {
                "finalPrice": {
                    "type": "number",
                    "minimum": 0
                },
                "formatted": {
                    "type": "string"
                }
            },
            "required": [
                "finalPrice",
                "formatted"
            ],
            "oneOf": [
                {
                    "$ref": "#/definitions/priceWithSpecial"
                },
                {
                    "$ref": "#/definitions/priceWithDiscount"
                },
                {
                    "$ref": "#/definitions/priceWithPersonalOffer"
                }
            ]
        },
        "dates": {
            "$ref": "#/definitions/dates"
        },
        "images": {
            "$ref": "#/definitions/images"
        },
        "manufacturer": {
            "$ref": "#/definitions/manufacturer"
        },
        "extensions": {
            "type": "object",
            "patternProperties": {
                ".*": {
                    "$ref": "#/definitions/utility::anyType"
                }
            }
        }
    },
    "required": [
        "id",
        "details",
        "meta",
        "settings",
        "shipping",
        "tax",
        "stock",
        "price",
        "images",
        "dates",
        "extensions"
    ],
    "definitions": {
        "details": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                },
                "model": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "shortDescription": {
                    "type": "string"
                },
                "codes": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "name": {
                                "type": "string"
                            },
                            "value": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "name",
                            "value"
                        ]
                    }
                }
            },
            "required": [
                "name",
                "model",
                "description",
                "shortDescription",
                "codes"
            ]
        },
        "settings": {
            "type": "object",
            "properties": {
                "type": {
                    "type": "string"
                },
                "weight": {
                    "type": "number"
                },
                "isFsk18": {
                    "type": "boolean"
                },
                "vpe": {
                    "$ref": "#/definitions/vpe"
                },
                "visibility": {
                    "$ref": "#/definitions/visibilitySettings"
                },
                "pricing": {"$refs": "#/definitions/pricingSettings"}
            },
            "required": [
                "type",
                "weight",
                "isFsk18",
                "vpe",
                "visibility",
                "pricing"
            ]
        },
        "shipping": {
            "type": "object",
            "properties": {
                "days": {
                    "type": "integer"
                },
                "name": {
                    "type": "string"
                },
                "image": {
                    "type": "string"
                },
                "linkIsActive": {
                    "type": "boolean"
                },
                "range": {
                    "type": "object",
                    "properties": {
                        "low": {
                            "$ref": "#/definitions/shippingRangeBound"
                        },
                        "high": {
                            "$ref": "#/definitions/shippingRangeBound"
                        }
                    },
                    "required": [
                        "low",
                        "high"
                    ]
                }
            },
            "required": [
                "days",
                "name",
                "image",
                "linkIsActive",
                "range"
            ]
        },
        "stock": {
            "type": "object",
            "properties": {
                "quantity": {
                    "type": "number"
                },
                "interval": {
                    "type": "number"
                },
                "orderMinQuantity": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                },
                "availability": {
                    "type": "string"
                }
            },
            "required": [
                "quantity",
                "interval",
                "orderMinQuantity",
                "unit",
                "availability"
            ]
        },
        "meta": {
            "type": "object",
            "properties": {
                "title": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "keywords": {
                    "type": "string"
                },
                "link": {
                    "type": "string"
                },
                "sitemap": {
                    "type": "object",
                    "properties": {
                        "priority": {
                            "type": "number"
                        },
                        "frequency": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "priority",
                        "frequency"
                    ]
                }
            },
            "required": [
                "title",
                "description",
                "keywords",
                "link",
                "sitemap"
            ]
        },
        "tax": {
            "type": "object",
            "properties": {
                "total": {
                    "type": "number"
                },
                "formatted": {
                    "type": "string"
                },
                "rates": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/taxRate"
                    }
                }
            },
            "required": [
                "formatted",
                "total",
                "rates"
            ]
        },
        "priceWithSpecial": {
            "type": "object",
            "properties": {
                "special": {
                    "type": "object",
                    "properties": {
                        "normalPrice": {
                            "type": "number"
                        },
                        "formatted": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "normalPrice",
                        "formatted"
                    ]
                }
            },
            "required": [
                "special"
            ]
        },
        "priceWithDiscount": {
            "type": "object",
            "properties": {
                "discount": {
                    "type": "object",
                    "properties": {
                        "previousPrice": {
                            "type": "object",
                            "properties": {
                                "value": {
                                    "type": "number"
                                },
                                "formatted": {
                                    "type": "string"
                                }
                            },
                            "required": [
                                "value",
                                "formatted"
                            ]
                        },
                        "saving": {
                            "type": "object",
                            "properties": {
                                "percentage": {
                                    "type": "number"
                                },
                                "formatted": {
                                    "type": "string"
                                }
                            },
                            "required": [
                                "percentage",
                                "formatted"
                            ]
                        }
                    },
                    "required": [
                        "previousPrice",
                        "saving"
                    ]
                }
            },
            "required": [
                "discount"
            ]
        },
        "priceWithPersonalOffer": {
            "type": "object",
            "properties": {
                "personalOffer": {
                    "type": "object",
                    "properties": {
                        "normalPrice": {
                            "type": "number"
                        },
                        "formatted": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "normalPrice",
                        "formatted"
                    ]
                }
            },
            "required": [
                "personalOffer"
            ]
        },
        "dates": {
            "type": "object",
            "properties": {
                "createdAt": {
                    "type": "string",
                    "format": "date-time"
                },
                "modifiedAt": {
                    "type": "string",
                    "format": "date-time"
                },
                "availableAt": {
                    "type": "string",
                    "format": "date-time"
                },
                "expiresAt": {
                    "type": "string",
                    "format": "date-time"
                }
            },
            "required": [
                "createdAt",
                "modifiedAt"
            ]
        },
        "images": {
            "type": "object",
            "properties": {
                "main": {
                    "$ref": "#/definitions/image"
                },
                "additional": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/image"
                    }
                }
            },
            "required": []
        },
        "image": {
            "type": "object",
            "properties": {
                "url": {
                    "type": "string"
                },
                "alt": {
                    "type": "string"
                }
            },
            "required": [
                "url",
                "alt"
            ]
        },
        "manufacturer": {
            "type": [
                "object",
                "null"
            ],
            "properties": {
                "name": {
                    "type": "string"
                },
                "url": {
                    "type": "string"
                },
                "image": {
                    "type": "string"
                }
            },
            "required": [
                "name",
                "url"
            ]
        },
        
        "vpe": {
            "type": [
                "object",
                "null"
            ],
            "properties": {
                "formatted": {
                    "type": "string"
                },
                "unit": {
                    "type": "string"
                },
                "value": {
                    "type": "number"
                }
            },
            "required": [
                "formatted",
                "unit",
                "value"
            ]
        },
        "visibilitySettings": {
            "type": "object",
            "properties": {
                "showStock": {
                    "type": "boolean"
                },
                "showVpeUnit": {
                    "type": "boolean"
                },
                "showOnStartPage": {
                    "type": "boolean"
                },
                "showWeight": {
                    "type": "boolean"
                },
                "showSitemap": {
                    "type": "boolean"
                },
                "showReleaseDate": {
                    "type": "boolean"
                },
                "showFreeShipping": {
                    "type": "boolean"
                }
            },
            "required": [
                "showStock",
                "showVpeUnit",
                "showOnStartPage",
                "showWeight",
                "showSitemap",
                "showReleaseDate",
                "showFreeShipping"
            ]
        },
        "pricingSettings": {
            "type": "object",
            "properties": {
                "isNormal": {
                    "type": "boolean"
                },
                "isPriceAvailableOnRequest": {
                    "type": "boolean"
                },
                "isNotAvailableForPurchase": {
                    "type": "boolean"
                }
            },
            "required": [
                "isNormal",
                "isPriceAvailableOnRequest",
                "isNotAvailableForPurchase"
            ]
        },
        "taxRate": {
            "type": "object",
            "properties": {
                "description": {
                    "type": "string"
                },
                "rate": {
                    "type": "number"
                },
                "priority": {
                    "type": "integer"
                }
            },
            "required": [
                "description",
                "rate",
                "priority"
            ]
        },
        "shippingRangeBound": {
            "type": "object",
            "properties": {
                "days": {
                    "type": "integer"
                },
                "name": {
                    "type": "string"
                },
                "image": {
                    "type": "string"
                }
            },
            "required": [
                "days",
                "name",
                "image"
            ]
        },
        "utility::anyType": {
            "anyOf": [
                {
                    "type": "null"
                },
                {
                    "type": "boolean"
                },
                {
                    "type": "integer"
                },
                {
                    "type": "number"
                },
                {
                    "type": "string"
                },
                {
                    "type": "object"
                },
                {
                    "type": "array"
                }
            ]
        }
    }
}